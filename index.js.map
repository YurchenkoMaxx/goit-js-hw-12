{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await Axios.get(\"https://pixabay.com/api/\", {\n      params: {\n        key: '50312672-6ff896f2a2c8f700d68e76dd9',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page,\n        per_page: 15,\n      }\n    });\n\n    const { hits, totalHits } = response.data;\n\n    if (hits.length === 0) {\n      iziToast.warning({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        titleColor: 'white',\n        messageColor: 'white',\n      });\n      return { images: [], totalHits: 0 };\n    }\n\n    const images = hits.map(hit => ({\n      webformatURL: hit.webformatURL,\n      largeImageURL: hit.largeImageURL,\n      tags: hit.tags,\n      likes: hit.likes,\n      views: hit.views,\n      comments: hit.comments,\n      downloads: hit.downloads\n    }));\n\n    return { images, totalHits };\n\n  } catch (error) {\n    throw new Error('Помилка при отриманні зображень з Pixabay API');\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// export function getImagesByQuery(query) {\n//     const BASE_URL = 'https://pixabay.com/api/';\n\n//     const params = new URLSearchParams({\n//         key: '50312672-6ff896f2a2c8f700d68e76dd9',\n//         q: query,\n//         image_type: 'photo',\n//         orientation: 'horizontal',\n//         safesearch: 'true',      \n\n//     });\n\n//     const url = `${BASE_URL}?${params}`\n    \n//     return fetch(url, {params}).then(res => res.json());\n    \n// }\n// getImagesByQuery('flower');\n\n\n\n\n\n\n\n// refs.formEl.addEventListener('submit', e => {\n//     e.preventDefault();\n\n//     const userValue = e.target.elements.query.value;\n// })","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.load-more');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'title',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n});\n\nexport function createGallery(images) {\n  const markup = images.map(\n    ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\" class=\"image-container\" alt=\"${tags}\">\n          <img src=\"${webformatURL}\"\n               alt=\"${tags}\"\n               title=\"Likes: ${likes} | Views: ${views} | Comments: ${comments} | Downloads: ${downloads}\" />\n          <div class=\"info-overlay\">\n            <div class=\"info-item\"><b>Likes</b>: ${likes}</div>\n            <div class=\"info-item\"><b>Views</b>: ${views}</div>\n            <div class=\"info-item\"><b>Comments</b>: ${comments}</div>\n            <div class=\"info-item\"><b>Downloads</b>: ${downloads}</div>\n          </div>\n        </a>\n      </li>`).join('');\n\n      galleryEl.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.add('is-visible');\n}\n\nexport function hideLoader() {\n  loader.classList.remove('is-visible');\n}\n\nexport function showLoadMoreButton() {\n  \n  btnLoadMore.classList.remove('is-hidden');\n}\nexport function hideLoadMoreButton() {\n  btnLoadMore.classList.add('is-hidden');\n}\n\nexport function showToast(message, type = 'info') {\n  iziToast[type]({\n    message,\n    position: 'topRight',\n    backgroundColor: type === 'error' ? '#ef4040' : type === 'warning' ? '#ef4040' : '#f0ad4e',\n    titleColor: 'white',\n    messageColor: 'white',\n  });\n}","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showToast\n} from './js/render-functions';\n\n\n\nconst formEl = document.querySelector('.form');\nconst inputEl = document.querySelector('.input');\nconst btnLoadMore = document.querySelector('.load-more');\n\nlet query = '';\nlet currentPage = 0;\nlet maxPage = 0;\nconst PAGE_SIZE = 15;\n\nformEl.addEventListener('submit', handleFormSubmit);\nbtnLoadMore.addEventListener('click', loadMoreImages);\n\nasync function handleFormSubmit(e) {\n  e.preventDefault();\n  query = inputEl.value.trim();\n\n  if (!query) return showToast('Будь ласка, введіть запит', 'warning');\n\n  currentPage = 1;\n  hideLoadMoreButton();\n  clearGallery();\n  showLoader();\n\n  try {\n    const { images, totalHits } = await getImagesByQuery(query, currentPage);\n\n    createGallery(images);\n    maxPage = Math.ceil(totalHits / PAGE_SIZE);\n    if (currentPage < maxPage) showLoadMoreButton();\n  } catch {\n    showToast('Виникла помилка при завантаженні. Спробуйте ще раз.', 'error');\n  } finally {\n    hideLoader();\n  }\n  inputEl.value = '';\n}\n\nasync function loadMoreImages() {\n  currentPage++;\n  showLoader();\n\n  try {\n    const { images } = await getImagesByQuery(query, currentPage);\n    createGallery(images);\n\n\n    const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n\n    \n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth'\n    });\n\n\n    if (currentPage >= maxPage) {\n      hideLoadMoreButton();\n      showToast('We are sorry, but you\\'ve reached the end of search results', 'info');\n    }\n  } catch {\n    showToast('Виникла помилка при завантаженні. Спробуйте ще раз.', 'error');\n  } finally {\n    hideLoader();\n  }\n}\n\n"],"names":["getImagesByQuery","query","page","response","Axios","hits","totalHits","iziToast","hit","galleryEl","loader","btnLoadMore","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","showToast","message","type","formEl","inputEl","currentPage","maxPage","PAGE_SIZE","handleFormSubmit","loadMoreImages","e","cardHeight"],"mappings":"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"}